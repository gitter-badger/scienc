server {

    listen media-science.dev:9190;

    access_log /var/log/nginx/science/media-access.log;
    error_log /var/log/nginx/science/media-error.log;

    client_max_body_size 50M;


    gzip on;
    gzip_http_version 1.1;
    gzip_comp_level 6;
    gzip_proxied any;
    gzip_types text/plain  application/x-javascript text/xml application/xml application/xml+rss application/octet-stream text/csv:;
    gzip_disable "msie6";
    gzip_vary on;


    location /uploads/a/ {
        # allows only main server
        # allow ::1;
        # deny  all;

        if ($request_method = OPTIONS ) {
	        add_header Access-Control-Allow-Methods "PUT, OPTIONS";
	        add_header Content-Length 0;
	        add_header Content-Type text/plain;
	        return 200;
	    }

        alias /opt/science/media/;
        client_body_temp_path  /opt/science/media/tmp/;

        dav_methods PUT DELETE;
        create_full_put_path   on;
        dav_access user:rw group:rw all:rw;
        client_max_body_size 0;
    }

}